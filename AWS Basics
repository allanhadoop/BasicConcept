# Source https://www.edureka.co/blog/interview-questions/top-aws-architect-interview-questions-2016/

ec2-create-group CreateSecurityGroup -- Creates a new security group for use with your account.
1. Spot Instances - Amazon EC2 Spot instances allow you to bid on spare Amazon EC2 computing capacity. Since Spot instances are often 
available at a discount compared to On-Demand pricing, you can significantly reduce the cost of running your applications

2. Dedicated Instances are Amazon EC2 instances that run in a VPC on hardware that's dedicated to a single customer. Your Dedicated 
instances are physically isolated at the host hardware level from instances that belong to other AWS accounts

3. Reserved Instances provide you with a significant discount (up to 75%) compared to On-Demand instance.Reserved Instances 
can provide a capacity reservation
      - Standard Reserved Instances: are best suited for steady-state usage
      - Convertible Reserved Instances: It provides the capability to change the attributes of the Reserved Instance as long as the 
        exchange results in the creation of Reserved Instances of equal or greater value. Like Standard Reserved Instances, Convertible 
        Reserved Instances are best suited for steady-state usage.
      - Scheduled Reserved Instances:These are available to launch within the time windows you reserve

Expensive -- On-demand then reserved then spot instances.

---- Scenario - 
You have a video trans-coding application. The videos are processed according to a queue. If the processing of a video is interrupted in 
one instance, it is resumed in another instance. Currently there is a huge back-log of videos which needs to be processed, for this you 
need to add more instances, but you need these instances only until your backlog is reduced. Which of these would be an efficient way to 
do it?  - Use on-demand instance 

----Scenario - 
You have a distributed application that periodically processes large volumes of data across multiple Amazon EC2 Instances. The application
is designed to recover gracefully from Amazon EC2 instance failures. You are required to accomplish this task in the most cost effective 
way. ---Since the work we are addressing here is not continuous, a reserved instance shall be idle at times, same goes with On Demand 
instances. Also it does not make sense to launch an On Demand instance whenever work comes up, since it is expensive. Hence Spot Instances 
will be the right fit because of their low rates and no long term commitments.

----Q - Difference between Stopping and Terminating Instance means- 
Stopping and Starting an instance: When an instance is stopped, the instance performs a normal shutdown and then transitions to a stopped 
state. All of its Amazon EBS volumes remain attached, and you can start the instance again at a later time. You are not charged for 
additional instance hours while the instance is in a stopped state.

Terminating an instance: When an instance is terminated, the instance performs a normal shutdown, then the attached Amazon EBS volumes 
are deleted unless the volume’s deleteOnTermination attribute is set to false. The instance itself is also deleted, and you can’t 
start the instance again at a later time.

---- Q - 
If I want my instance to run on a single-tenant hardware, which value do I have to set the instance’s tenancy attribute to? - dedicated 

---- Q - 
When will you incur costs with an Elastic IP address (EIP)? --
            When you use more than one Elastic IPs with your instance.
            When your Elastic IP is attached to a stopped instance.
            When your Elastic IP is not attached to any instance.

---- Q - 
How is a Spot instance different from an On-Demand instance or Reserved Instance?
Spot Instance, On-Demand instance and Reserved Instances are all models for pricing. Moving along, spot instances provide the ability 
for customers to purchase compute capacity with no upfront commitment, at hourly rates usually lower than the On-Demand rate in each 
region. Spot instances are just like bidding, the bidding price is called Spot Price. The Spot Price fluctuates based on supply and 
demand for instances, but customers will never pay more than the maximum price they have specified. If the Spot Price moves higher 
than a customer’s maximum price, the customer’s EC2 instance will be shut down automatically. But the reverse is not true, if the Spot 
prices come down again, your EC2 instance will not be launched automatically, one has to do that manually.  In Spot and On demand 
instance, there is no commitment for the duration from the user side, however in reserved instances one has to stick to the time 
period that he has chosen.

---- Q - 
Are the Reserved Instances available for Multi-AZ Deployments? --Multi-AZ Available for all instance types

---- Q - 
How to use the CPU processor state control feature available on the  c4.8xlarge instance?
The processor state control consists of 2 states:C-states are idle states and P-states are operational states
-- The C state – Sleep state varying from c0 to c6. C6 being the deepest sleep state for a processor.With the exception of C0, 
      where the CPU is active and busy doing something, a C-state is an idle state. 
-- The P state – Performance state p0 being the highest and p15 being the lowest possible frequency.A P-state is an operational state, 
      meaning that the core / processor can be doing useful work in any P-state. 
---- Q - 
What kind of network performance parameters can you expect when you launch instances in cluster placement group?
The network performance depends on the instance type and network performance specification, if launched in a placement group you can 
expect up to
- 10 Gbps in a single-flow,
- 20 Gbps in multiflow i.e full duplex
- Network traffic outside the placement group will be limited to 5 Gbps(full duplex).

---- Q - 
To deploy a 4 node cluster of Hadoop in AWS which instance type can be used?
Hadoop cluster follows a master slave concept. The master machine processes all the data, slave machines store the data and act as 
data nodes. Since all the storage happens at the slave, a higher capacity hard disk would be recommended and since master does all 
the processing, a higher RAM and a much better CPU is required. Therefore, you can select the configuration of your machine depending 
on your workload. For e.g. – In this case c4.8xlarge will be preferred for master machine whereas for slave machine we can select 
i2.large instance. If you don’t want to deal with configuring your instance and installing hadoop cluster manually, you can straight 
away launch an Amazon EMR (Elastic Map Reduce) instance which automatically configures the servers for you. You dump your data to be 
processed in S3, EMR picks it from there, processes it, and dumps it back into S3.

---- Q - 
What factor to consider prior to selection availability Zone?
- performance, cost and latency 

---- Q - 
AWS limit 
- 5 Elastic IP addresses per region
- 5 VPCs per region
- 200 Subnets per VPC
- 50 Active VPC peering connections per VPC
- 20 VPC endpoints per region
- 8 for Small instances  
- 240 for Extra Large instances

---- Q - 
Is one Elastic IP address enough for every instance that I have running?
Every instance comes with its own private and public address. The private address is associated exclusively with the instance and 
is returned  to Amazon EC2 only when it is stopped or terminated. Similarly, the public address is associated exclusively with the 
instance until it is stopped or terminated. However, this can be replaced by the Elastic IP address, which stays with the instance as 
long as the user doesn’t manually detach it. But what if you are hosting multiple websites on your EC2 server, in that case you may 
require more than one Elastic IP address.

---- Q - 
Security in Amazon EC2
- Use AWS Identity and Access Management (IAM) to control access to your AWS resources.
- Restrict access by only allowing trusted hosts or networks to access ports on your instance.
- Review the rules in your security groups regularly, and ensure that you apply the principle of least
- Privilege – only open up permissions that you require.
- Disable password-based logins for instances launched from your AMI. Passwords can be found or cracked, and are a security risk.

---- Scenario - 
You need to configure an Amazon S3 bucket to serve static assets for your public-facing web application. Which method will ensure that 
all objects uploaded to the bucket are set to public read?
- Configure the bucket policy to set all objects to public read.Rather than making changes to every object, its better to set the policy for the whole bucket.

---- Scenario - 
A customer wants to leverage Amazon Simple Storage Service (S3) and Amazon Glacier as part of their backup and archive infrastructure. 
The customer plans to use third-party software to support this integration. Which approach will limit the access of the third party 
software to only the Amazon S3 bucket named “company-backup”?
- A custom IAM user policy limited to the Amazon S3 API in “company-backup”.this use case involves more granular permissions, hence 
IAM would be used here.

---- Q - 
What are use cases of using S3 with EC2 ?
- it can be used for instances with root devices backed by local instance storage.
- use the tools provided to load their Amazon Machine Images (AMIs) into Amazon S3 and to move them between Amazon S3 and Amazon EC2.
- for websites hosted on EC2 to load their static content from S3.

---- Q - 
A customer implemented AWS Storage Gateway with a gateway-cached volume at their main office. An event takes the link between the 
main and branch office offline. Which methods will enable the branch office to access their data?
- Launch a new AWS Storage Gateway instance AMI in Amazon EC2, and restore from a gateway snapshot.

---- Q - 
When you need to move data over long distances using the internet, for instance across countries or continents to your Amazon S3 bucket, 
which method or service will you use?
- Amazon Transfer Acceleration . We cannot use snowball , snowball service does not support cross region data transfer

---- Info - 
The best way of connecting to your cloud resources (for ex- ec2 instances) from your own data center (for eg- private cloud) is a VPC. 
Once you connect your datacenter to the VPC in which your instances are present, each instance is assigned a private IP address which 
can be accessed from your datacenter. Hence, you can access your public cloud resources, as if they were on your own network.

---- Q - 
Can I connect my corporate datacenter to the Amazon Cloud?
- Yes, you can do this by establishing a VPN(Virtual Private Network) connection between your company’s network and your VPC 
(Virtual Private Cloud

---- Info - 
Primary private IP address is attached with the instance throughout its lifetime and cannot be changed, however secondary private 
addresses can be unassigned, assigned or moved between interfaces or instances at any point.

---- Info - 
Subnets - To efficiently utilize networks that have a large no. of hosts. We can attach multiple subnets to a route table
Route Tables are used to route network packets, therefore in a subnet having multiple route tables will lead to confusion as to 
where the packet has to go. Therefore, there is only one route table in a subnet, and since a route table can have any no. of records 
or information, hence attaching multiple subnets to a route table is possible.

---- Q - 
CloudFront delivers the content directly from the origin server and stores it in the cache of the edge location.CloudFront is a content 
delivery system, which caches data to the nearest edge location from the user, to reduce latency. If data is not present at an edge 
location, the first time the data may get transferred from the original server, but from the next time, it will be served from the cached 
edge.

----Q - 
If I’m using Amazon CloudFront, can I use Direct Connect to transfer objects from my own data center? - 
- Yes. Amazon CloudFront supports custom origins including origins from outside of AWS. With AWS Direct Connect, you will be charged with 
the respective data transfer rates.

----Q - 
If my AWS Direct Connect fails, will I lose my connectivity? -
If a backup AWS Direct connect has been configured, in the event of a failure it will switch over to the second one. It is recommended to 
enable Bidirectional Forwarding Detection (BFD) when configuring your connections to ensure faster detection and failover. On the other 
hand, if you have configured a backup IPsec VPN connection instead, all VPC traffic will failover to the backup VPN connection 
automatically. Traffic to/from public resources such as Amazon S3 will be routed over the Internet. If you do not have a backup AWS 
Direct Connect link or a IPsec VPN link, then Amazon VPC traffic will be dropped in the event of a failure

----Q - 
 If I launch a standby RDS instance, will it be in the same Availability Zone as my primary?
 No, since the purpose of having a standby instance is to avoid an infrastructure failure

----Q - 
When would I prefer Provisioned IOPS over Standard RDS storage?
If you have batch-oriented workloads. Batch processing workloads do not require manual intervention they enable full utilization of 
systems, therefore a provisioned IOPS will be preferred for batch oriented workload.

---- Scenario - 
If I am running my DB Instance as a Multi-AZ deployment, can I use the standby DB Instance for read or write operations along with 
primary DB instance?
-No, Standby DB instance cannot be used with primary DB instance in parallel, as the former is solely used for standby purposes, it 
cannot be used unless the primary instance goes down.

----Info - 
Working with PostgreSQL, MySQL, and MariaDB Read Replicas. Amazon RDS uses the MySQL, MariaDB, and PostgreSQL (version 9.3.5 and later) 
DB engines' built-in replication functionality to create a special type of DB instance called a Read Replica from a source DB instance.

--- Scenario - 
Your company’s branch offices are all over the world, they use a software with a multi-regional deployment on AWS, they use MySQL 5.6 for 
data persistence.The task is to run an hourly batch process and read data from every region to compute cross-regional reports which 
will be distributed to all the branches. This should be done in the shortest time possible. How will you build the DB architecture 
in order to meet the requirements?
- For each regional deployment, use RDS MySQL with a master in the region and a read replica in the HQ region
For this we will take an RDS instance as a master, because it will manage our database for us and since we have to read from every region, 
we’ll put a read replica of this instance in every region where the data has to be read from. It is not correct since putting a 
read replica would be more efficient than putting a snapshot, a read replica can be promoted if needed  to an independent DB instance, 
but with a Db snapshot it becomes mandatory to launch a separate DB Instance

--- Scenario -
Which AWS services will you use to collect and process e-commerce data for near real-time analysis?
- DynamoDB is a fully managed NoSQL database service. DynamoDB, therefore can be fed any type of unstructured data, which can be data from 
e-commerce websites as well, and later, an analysis can be done on them using Amazon Redshift. We are not using Elastic MapReduce, since a 
near real time analyses is needed

---Q -
Can I retrieve only a specific element of the data, if I have a nested JSON data in DynamoDB?
- Yes. When using the GetItem, BatchGetItem, Query or Scan APIs, you can define a Projection Expression to determine which attributes 
should be retrieved from the table. Those attributes can include scalars, sets, or elements of a JSON document.

----Scenario - 
A company is deploying a new two-tier web application in AWS. The company has limited staff and requires high availability, and the 
application requires complex queries and table joins. Which configuration provides the solution for the company’s requirements?
- DynamoDB has the ability to scale more than RDS or any other relational database service

----Q - 
What happens to my backups and DB Snapshots if I delete my DB Instance?
When you delete a DB instance, you have an option of creating a final DB snapshot, if you do that you can restore your database from 
that snapshot. RDS retains this user-created DB snapshot along with all other manually created DB snapshots after the instance is deleted, 
also automated backups are deleted and only manually created DB Snapshots are retained.

----Q - 
Which of the following use cases are suitable for Amazon DynamoDB? 
- Storing metadata for Amazon S3 objects.
- Running relational joins and complex updates.
If all your JSON data have the same fields eg [id,name,age] then it would be better to store it in a relational database, the metadata 
on the other hand is unstructured, also running relational joins or complex updates would work on DynamoDB as well.

----Scenario - 
How can I load my data to Amazon Redshift from different data sources like Amazon RDS, Amazon DynamoDB and Amazon EC2?
- You can use the COPY command to load data in parallel directly to Amazon Redshift from Amazon EMR, Amazon DynamoDB, or any SSH-enabled 
host.
- AWS Data Pipeline provides a high performance, reliable, fault tolerant solution to load data from a variety of AWS data sources. You 
can use AWS Data Pipeline to specify the data source, desired data transformations, and then execute a pre-written import script to load 
your data into Amazon Redshift.

----Scenario - 
Your application has to retrieve data from your user’s mobile every 5 minutes and the data is stored in DynamoDB, later every day at a 
particular time the data is extracted into S3 on a per user basis and then your application is later used to visualize the data to the 
user. You are asked to optimize the architecture of the backend system to lower cost, what would you recommend?
-Since our work requires the data to be extracted and analyzed, to optimize this process a person would use provisioned IO, but since it 
is expensive, using a ElastiCache memoryinsread to cache the results (from DynamoDB) in the memory can reduce the provisioned read 
throughput and hence reduce cost without affecting the performance.

----Scenario - 
You are running a website on EC2 instances deployed across multiple Availability Zones with a Multi-AZ RDS MySQL Extra Large DB Instance. 
The site performs a high number of small reads and writes per second and relies on an eventual consistency model. After comprehensive 
tests you discover that there is read contention on RDS MySQL. Which are the best approaches to meet these requirements?  
- Deploy ElastiCache in-memory cache running in each availability zone
- Increase the RDS MySQL Instance size and Implement provisioned IOPS
Since it does a lot of read writes, provisioned IO may become expensive. But we need high performance as well, therefore the data can be 
cached using ElastiCache which can be used for frequently reading the data. As for RDS since read contention is happening, the instance 
size should be increased and provisioned IO should be introduced to increase the performance.

----Scenario - 
A startup is running a pilot deployment of around 100 sensors to measure street noise and air quality in urban areas for 3 months. 
It was noted that every month around 4GB of sensor data is generated. The company uses a load balanced auto scaled layer of EC2 instances 
and a RDS database with 500 GB standard storage. The pilot was a success and now they want to deploy at least  100K sensors which need 
to be supported by the backend. You need to store the data for at least 2 years to analyze it. Which setup of the following would you 
prefer?
- A Redshift cluster would be preferred because it easy to scale, also the work would be done in parallel through the nodes, therefore is 
perfect for a bigger workload like our use case. Since each month 4 GB of data is generated, therefore in 2 year, it should be around 
96 GB. And since the servers will be increased to 100K in number, 96 GB will approximately become 96TB

----Scenario - 
Suppose you have an application where you have to render images and also do some general computing. From the following  services which 
service will best fit your need?
- You will choose an application load balancer, since it supports path based routing, which means it can take decisions based on the URL, 
therefore if your task needs image rendering it will route it to a different instance, and for general computing it will route it to a 
different instance.

----Info  - 
Scalability is the ability of a system to increase its hardware resources to handle the increase in demand. It can be done by increasing 
the hardware specifications or increasing the processing nodes.

Elasticity is the ability of a system to handle increase in the workload by adding additional hardware resources when the demand 
increases(same as scaling) but also rolling back the scaled resources, when the resources are no longer needed. This is particularly 
helpful in Cloud environments, where a pay per use model is followed.

----Q - 
How will you change the instance type for instances which are running in your application tier and are using Auto Scaling. 
Where will you change it from the following areas?
- Auto scaling tags configuration, is used to attach metadata to your instances, to change the instance type you have to use auto 
scaling launch configuration.

----Scenario - 
You have a content management system running on an Amazon EC2 instance that is approaching 100% CPU utilization. Which option will 
reduce load on the Amazon EC2 instance?
- Creating alone an autoscaling group will not solve the issue, until you attach a load balancer to it. Once you attach a load balancer 
to an autoscaling group, it will efficiently distribute the load among all the instances. Option B – CloudFront is a CDN, it is a data 
transfer tool therefore will not help reduce load on the EC2 instance. Similarly the other option – Launch configuration is a template 
for configuration which has no connection with reducing loads.

----Scenario - 
When should I use a Classic Load Balancer and when should I use an Application load balancer?
-A Classic Load Balancer is ideal for simple load balancing of traffic across multiple EC2 instances, while an Application Load Balancer 
is ideal for microservices or container-based architectures where there is a need to route traffic to multiple services or load balance 
across multiple ports on the same EC2 instance.

----Q - 
What does Connection draining do?
Re-routes traffic from instances which are to be updated or failed a health check.Connection draining is a service under ELB which 
constantly monitors the health of the instances. If any instance fails a health check or if any instance has to be patched with a 
software update, it  pulls all the traffic from that instance and re routes them to other instances.

----Q - 
When an instance is unhealthy, it is terminated and replaced with a new one, which of the following services does that?
When ELB detects that an instance is unhealthy, it starts routing incoming traffic to other healthy instances in the region. If all the 
instances in a region becomes unhealthy, and if you have instances in some other availability zone/region, your traffic is directed to 
them. Once your instances become healthy again, they are re routed back to the original instances.

----Q -
What are lifecycle hooks used for in AutoScaling?
They are used to put an additional wait time to a scale in or scale out event.Lifecycle hooks are used for putting wait time before any 
lifecycle action i.e launching or terminating an instance happens. The purpose of this wait time, can be anything from extracting log 
files before terminating an instance or installing the necessary softwares in an instance before launching it.

----Scenario - 
A user has setup an Auto Scaling group. Due to some issue the group has failed to launch a single instance for more than 24 hours. 
What will happen to Auto Scaling in this condition?
-Auto Scaling will suspend the scaling process. Auto Scaling allows you to suspend and then resume one or more of the Auto Scaling 
processes in your Auto Scaling group. This can be very useful when you want to investigate a configuration problem or other issue with 
your web application, and then make changes to your application, without triggering the Auto Scaling process.






